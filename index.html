<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculator</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:"Poppins", sans-serif; }
html, body { width:100%; height:100%; background:#fff; display:flex; justify-content:center; align-items:center; }

.calculator {
  width:100%; max-width:420px; height:100%; max-height:720px;
  display:flex; flex-direction:column; justify-content:flex-end; background:#fff;
}

.status { height:30px; text-align:center; line-height:30px; color:#fff; background:#f44336; font-weight:bold; display:none; }

.display {
  height:20%; min-height:80px; width:100%;
  background:#f0f0f0; color:#2e7d32; font-size:3rem; font-weight:bold;
  text-align:right; padding:20px; display:flex; align-items:flex-end; justify-content:flex-end;
  border-bottom:1px solid #ddd; overflow-x:auto;
}

.buttons {
  display:grid; grid-template-columns:repeat(4,1fr); grid-template-rows:repeat(5,1fr);
  flex:1 1 auto; gap:8px; padding:10px;
}

button {
  border:1px solid #ddd; border-radius:12px; font-size:2rem; font-weight:500;
  cursor:pointer; background:#fff; display:flex; justify-content:center; align-items:center;
  user-select:none; transition: background 0.2s, transform 0.1s;
}
button:active { transform:scale(0.95); }
button:hover { background:#f0f0f0; }
button.number { color:#2e7d32; }
button.operator { color:#388e3c; }
button.equal { color:#fff; background:#2e7d32; }
button.equal:hover { background:#1b5e20; }
button.clear { color:#fff; background:#f44336; }
button.clear:hover { background:#d32f2f; }

/* Webview */
#webview { position:fixed; top:0; left:0; width:100%; height:100%; background:#fff; display:none; flex-direction:column; z-index:9999; }
#topBar { height:60px; background:#2e7d32; color:white; display:flex; align-items:center; padding:0 15px; font-size:22px; flex-shrink:0; }
#backBtn { background:none; border:none; color:white; font-size:26px; margin-right:12px; cursor:pointer; }
#iframeBox { width:100%; height:calc(100% - 60px); border:none; display:none; flex:1; }
#loader { display:flex; justify-content:center; align-items:center; height:100%; flex:1; }
.dot { width:12px; height:12px; margin:0 5px; background:#2e7d32; border-radius:50%; animation:jump 0.6s infinite alternate; }
.dot:nth-child(2) { animation-delay:0.2s; }
.dot:nth-child(3) { animation-delay:0.4s; }
@keyframes jump { 0% { transform:translateY(0); } 100% { transform:translateY(-15px); } }

/* Secret menu */
#secretMenu { position:fixed; top:0; left:0; width:100%; height:100%; background:#fff; display:none; padding:20px; overflow-y:auto; z-index:9999; }
.s-item { padding:15px; background:#f0f0f0; border-radius:10px; margin-bottom:12px; font-size:1.2rem; cursor:pointer; }
h2 { color:#2e7d32; margin-bottom:20px; }

/* Responsive */
@media(max-width:500px){ .display{ font-size:2rem; padding:15px; } button{ font-size:1.5rem; min-height:50px; } }
@media(max-height:650px){ .display{ font-size:1.8rem; padding:10px; } button{ font-size:1.3rem; min-height:45px; } }
</style>
</head>
<body>

<div class="calculator" id="calculator">
  <div class="status" id="status"></div>
  <div class="display" id="display">0</div>
  <div class="buttons">
    <button class="clear" onclick="clearDisplay()">C</button>
    <button class="operator" onclick="deleteChar()">⌫</button>
    <button class="operator" onclick="append('%')">%</button>
    <button class="operator" onclick="append('÷')">÷</button>

    <button class="number" onclick="append('7')">7</button>
    <button class="number" onclick="append('8')">8</button>
    <button class="number" onclick="append('9')">9</button>
    <button class="operator" onclick="append('×')">×</button>

    <button class="number" onclick="append('4')">4</button>
    <button class="number" onclick="append('5')">5</button>
    <button class="number" onclick="append('6')">6</button>
    <button class="operator" onclick="append('-')">−</button>

    <button class="number" onclick="append('1')">1</button>
    <button class="number" onclick="append('2')">2</button>
    <button class="number" onclick="append('3')">3</button>
    <button class="operator" onclick="append('+')">+</button>

    <button class="number" onclick="append('0')">0</button>
    <button class="number" onclick="append('00')">00</button>
    <button class="number" onclick="append('.')">.</button>
    <button class="equal" onclick="calculate()">=</button>
  </div>
</div>

<!-- Webview -->
<div id="webview">
  <div id="topBar">
    <button id="backBtn" onclick="closeWebview()">←</button> Web
  </div>
  <div id="loader">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <iframe id="iframeBox"></iframe>
</div>

<!-- Secret Menu -->
<div id="secretMenu">
  <h2>Secret Menu</h2>
  <div class="s-item" onclick="openWebsite('https://mdgcal.vercel.app/')">MDG Cal</div>
  <div class="s-item" onclick="openWebsite('https://mdg2cal.vercel.app/')">MDG2 Cal</div>
  <div class="s-item" onclick="openWebsite('https://mdg3cal.vercel.app/')">MDG3 Cal</div>
  <div class="s-item" onclick="openWebsite('https://chat.openai.com')">ChatGPT</div>
  <div class="s-item" onclick="openWebsite('https://gemini.google.com')">Gemini AI</div>
  <div class="s-item" onclick="openWebsite('https://proxis.vercel.app')">Proxis AI</div>
  <div class="s-item" onclick="openWebsite('https://copilot.microsoft.com')">Copilot AI</div>
  <div class="s-item" onclick="openWebsite('https://www.perplexity.ai')">Perplexity AI</div>
  <div class="s-item" onclick="closeSecret()">Close Menu</div>
</div>

<script>
const display = document.getElementById("display");
const status = document.getElementById("status");
let input = "";

function showStatus(msg){ status.innerText = msg; status.style.display = "block"; setTimeout(()=>{ status.style.display="none"; },3000); }

function append(val){ input = (input==="0")? val : input+val; display.innerText = input; }
function clearDisplay(){ input="0"; display.innerText="0"; }
function deleteChar(){ input = input.slice(0,-1)||"0"; display.innerText = input; }

function calculate(){
  const codes = {
    "555-0":"secret","555-7":"https://mdgcal.vercel.app/","555-6":"https://mdg2cal.vercel.app/","555-5":"https://mdg3cal.vercel.app/",
    "777-1":"https://chat.openai.com","777-2":"https://gemini.google.com","777-3":"https://proxis.vercel.app","777-4":"https://copilot.microsoft.com",
    "777-5":"https://www.perplexity.ai"
  };
  if(codes[input]){
    if(codes[input]==="secret"){ document.getElementById("secretMenu").style.display="block"; input="0"; display.innerText="0"; return; }
    openWebsite(codes[input]); input="0"; display.innerText="0"; return;
  }
  try{ display.innerText = eval(input.replace("×","×").replace("÷","÷")); input=display.innerText; } 
  catch{ display.innerText="Error"; showStatus("Error"); input="0"; }
}

// Webview
const webview = document.getElementById("webview");
const loader = document.getElementById("loader");
const iframeBox = document.getElementById("iframeBox");

function openWebsite(url){
  if(!navigator.onLine){ showStatus("kutay Internet to dekh lay"); display.innerText="0"; return; }
  webview.style.display="flex"; loader.style.display="flex"; iframeBox.style.display="none";
  iframeBox.src = url;
  iframeBox.onload = ()=>{ loader.style.display="none"; iframeBox.style.display="block"; };
  iframeBox.onerror = ()=>{ loader.style.display="none"; showStatus("Error loading site"); };
}

function closeWebview(){ iframeBox.src=""; webview.style.display="none"; }
function closeSecret(){ document.getElementById("secretMenu").style.display="none"; }
</script>

</body>
  </html>
